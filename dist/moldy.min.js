!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.moldy=e()}}(function(){return function e(t,r,n){function o(i,s){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,t){function r(e){return e?n(e):void 0}function n(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],2:[function(e,t){var r=e("sc-contains"),n=e("sc-is"),o=function(e,t,a,i){var s,u=t,c=n.an.array(i)?i:[];switch(!0){case/float|integer/.test(u):u="number"}if(n.a[u](e)||"*"===u)s=e;else switch(!0){case"array"===u:try{if(n.a.string(e)&&(s=JSON.parse(e)),n.not.an.array(s))throw""}catch(l){n.not.nullOrUndefined(e)&&(s=[e])}break;case"boolean"===u:try{s=/^(true|1|y|yes)$/i.test(e.toString())?!0:void 0}catch(l){}if(n.not.a.boolean(s))try{s=/^(false|-1|0|n|no)$/i.test(e.toString())?!1:void 0}catch(l){}s=n.a.boolean(s)?s:void 0;break;case"date"===u:try{s=new Date(e),s=isNaN(s.getTime())?void 0:s}catch(l){}break;case"string"===u:try{if(s=JSON.stringify(e),n.undefined(s))throw""}catch(l){try{s=e.toString()}catch(l){}}break;case"number"===u:try{s=parseFloat(e),(n.not.a.number(s)||isNaN(s))&&(s=void 0)}catch(l){s=void 0}if(void 0!==s)switch(!0){case"integer"===t:s=parseInt(s)}break;default:try{s=o(JSON.parse(e),u)}catch(l){}}return c.length>0&&!r(c,s)&&(s=c[0]),n.not.undefined(s)?s:n.not.undefined(a)?a:null};t.exports=o},{"sc-contains":3,"sc-is":7}],3:[function(e,t){var r=function(e,t){var r=!1;return Array.isArray(e)?e.forEach(function(e){r===!1&&t===e&&(r=!0)}):Object(e)===e&&Object.keys(e).forEach(function(n){r===!1&&e[n]===t&&(r=!0)}),r};t.exports=r},{}],4:[function(e,t,r){var n="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";r.generate=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:7&r|8).toString(16)});return t},r.match=function(e){var t=new RegExp(n,"g"),r=("string"==typeof e?e:"").match(t);return Array.isArray(r)?r:[]},r.isValid=function(e){var t=new RegExp(n);return t.test(e)}},{}],5:[function(e,t){function r(e,t,a){e="object"===n(e)?e:{},t="array"===n(t)?t:[],a="string"===n(a)?a:"";var i=t.length>0?t.shift():"",s=o.call(e,i)||void 0!==e[i],u=s?e[i]:void 0,c=n(u)===a;return t.length>0&&s?r(e[i],t,a):t.length>0||""===a?s:s&&c}var n=e("type-component"),o=Object.prototype.hasOwnProperty;t.exports=function(e,t,o){return t="string"===n(t)?t.split("."):[],r(e,t,o)}},{"type-component":6}],6:[function(e,t){var r=Object.prototype.toString;t.exports=function(e){switch(r.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},{}],7:[function(e,t,r){var n=e("./ises/type"),o={a:{},an:{},not:{a:{},an:{}}},a={arguments:["arguments",n("arguments")],array:["array",n("array")],"boolean":["boolean",n("boolean")],date:["date",n("date")],"function":["function","func","fn",n("function")],"null":["null",n("null")],number:["number","integer","int",n("number")],object:["object",n("object")],regexp:["regexp",n("regexp")],string:["string",n("string")],undefined:["undefined",n("undefined")],empty:["empty",e("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",e("./ises/nullorundefined")],guid:["guid",e("./ises/guid")]};Object.keys(a).forEach(function(e){var t=a[e].slice(0,a[e].length-1),r=a[e][a[e].length-1];t.forEach(function(e){o[e]=o.a[e]=o.an[e]=r,o.not[e]=o.not.a[e]=o.not.an[e]=function(){return r.apply(this,arguments)?!1:!0}})}),r=t.exports=o,r.type=n},{"./ises/empty":8,"./ises/guid":9,"./ises/nullorundefined":10,"./ises/type":11}],8:[function(e,t){var r=e("../type");t.exports=function(e){var t=!1;return"null"===r(e)||"undefined"===r(e)?t=!0:"object"===r(e)?t=0===Object.keys(e).length:"boolean"===r(e)?t=e===!1:"number"===r(e)?t=0===e||-1===e:("array"===r(e)||"string"===r(e))&&(t=0===e.length),t}},{"../type":12}],9:[function(e,t){var r=e("sc-guid");t.exports=function(e){return r.isValid(e)}},{"sc-guid":4}],10:[function(e,t){t.exports=function(e){return null===e||void 0===e||void 0===e}},{}],11:[function(e,t){var r=e("../type");t.exports=function(e){return function(t){return r(t)===e}}},{"../type":12}],12:[function(e,t){var r=Object.prototype.toString;t.exports=function(e){switch(r.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===e?"null":void 0===e?"undefined":e===Object(e)?"object":typeof e}},{}],13:[function(e,t){var r=e("type-component"),n=function(){var e=Array.prototype.slice.call(arguments),t="boolean"===r(e[0])?e.shift():!1,o=e,a={};return o.forEach(function(e){"object"===r(e)&&Object.keys(e).forEach(function(o){Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=t&&"object"===r(e[o])?n(t,{},a[o],e[o]):e[o])})}),a};t.exports=n},{"type-component":14}],14:[function(e,t){t.exports=e(6)},{}],15:[function(e,t){var r=function(e){var t={},r=Array.isArray(e)?e:[],n=function(e){var n=Array.prototype.slice.call(arguments,1);return t[e]?t[e].apply(r,n):r["__"+e].apply(r,n)};return Object.defineProperties(r,{on:{value:function(e,r){t[e]=r}}}),Object.defineProperty(r,"pop",{value:function(){return n("pop",r[r.length-1])}}),Object.defineProperty(r,"__pop",{value:function(){return Array.prototype.pop.apply(r,arguments)}}),Object.defineProperty(r,"shift",{value:function(){return n("shift",r[0])}}),Object.defineProperty(r,"__shift",{value:function(){return Array.prototype.shift.apply(r,arguments)}}),["push","reverse","unshift","sort","splice"].forEach(function(e){var t={};t[e]={value:n.bind(null,e)},t["__"+e]={value:function(){return Array.prototype[e].apply(r,arguments)}},Object.defineProperties(r,t)}),r};t.exports=r},{}],16:[function(e,t){t.exports={defaults:{middlewareKey:"all"}}},{}],17:[function(e,t){var r=e("sc-is"),n=e("./config.json"),o=function(){},a=function(e,t,n){return r.not.empty(t)&&r.a.string(t)?(r.not.an.array(e[t])&&(e[t]=[]),r.a.func(n)&&e[t].push(n),e[t]):void 0},i=function(){this.functions={all:[]}};i.prototype.use=function(){var e=this,t=Array.prototype.slice.call(arguments),i=r.a.string(t[0])?t.shift():n.defaults.middlewareKey,s=r.a.func(t[0])?t.shift():o;console.log(t[0]),console.log(r.an.object(t[0])),s===o&&r.an.object(t[0])&&(console.log(i),s=t.shift().setup(),console.log(s.findOne)),a(e.functions,i,s)},i.prototype.middleware=function(){var e=this,t=0,i=Array.prototype.slice.call(arguments),s=r.a.string(i[0])&&r.a.func(i[1])?i.shift():n.defaults.middlewareKey,u=r.a.func(i[0])?i.shift():o;a(e.functions,s);var c=function(){var r=e.functions[s][t++],n=Array.prototype.slice.call(arguments);r?(n.push(c),r.apply(e.context,n)):u.apply(e.context,n)};c.apply(e.context,i)},i.prototype.clear=function(e){r.a.string(e)&&r.not.empty(e)?this.functions[e]=[]:this.functions={all:[]}},t.exports=function(e){var t=new i;r.an.object(e)?(Object.defineProperties(e,{use:{value:function(){return t.use.apply(t,arguments),e}},middleware:{value:function(){t.middleware.apply(t,arguments)}},useify:{value:t}}),t.context=e):r.a.fn(e)&&(e.prototype.middleware=function(){t.context=this,t.middleware.apply(t,arguments)},e.use=function(){return t.use.apply(t,arguments),this},e.useify=t)}},{"./config.json":16,"sc-is":7}],18:[function(e,t){t.exports={defaults:{baseUrl:"",headers:{}}}},{}],19:[function(e,t,r){var n=e("./config.json"),o={adapters:{__default:{}},use:function(e){this.adapters.__default=e.setup(),console.log(this.adapters.__default),console.log("====")}},a=e("./moldy")(e("./model"),n.defaults,o.adapters);o.extend=function(e,t){return new a(e,t)},r=t.exports=o,r.defaults=n.defaults},{"./config.json":18,"./model":21,"./moldy":22}],20:[function(e,t,r){var n=e("sc-is"),o=e("sc-cast"),a=e("sc-merge");r.attributes=function(e,t){var r;return r=n.a.string(t)?{type:t}:n.an.object(t)&&t.__isMoldy===!0?{type:"moldy","default":t}:t,a({name:e||"",type:"","default":null,optional:!1},r)},r.getProperty=function(e){return function(){return this.__data[e]}},r.destroyedError=function(e){var t="object"==typeof e?e:{};return new Error("The given moldy item `"+t.__name+"` has been destroyed")},r.setBusy=function(e){return function(){e.busy=!0}},r.setProperty=function(e){return function(t){var r=this,n=r.__attributes[e],a=n.type?o(t,n.type,n["default"]):t;r.__data[e]!==a&&r.emit("change",r.__data[e],a),r.__data[e]=a}},r.unsetBusy=function(e){return function(){e.busy=!1}},r.noop=function(){};var i=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var r in t)e[r]=t[r]}),e};r.extend=i,r.extendObject=function(e,t){var r,n=this;r=e&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},i(r,n,t);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,e&&i(r.prototype,e),r.__super__=n.prototype,r}},{"sc-cast":2,"sc-is":7,"sc-merge":13}],21:[function(e,t,r){var n=e("sc-cast"),o=e("emitter-component"),a=e("sc-haskey"),i=e("./helpers"),s=e("sc-is"),u=(e("./request"),i.extendObject),c=e("useify"),l=function(e,t){var r=this;e=e||{},this.__moldy=t,this.__isMoldy=!0,this.__attributes={},this.__data={},this.__destroyed=!1,r.__moldy.__keyless||r.__moldy.$defineProperty(r,r.__moldy.__key),Object.keys(n(r.__moldy.__metadata,"object",{})).forEach(function(t){r.__moldy.$defineProperty(r,t,e[t])});for(var o in e)e.hasOwnProperty(o)&&r.__moldy.__metadata[o]&&(this[o]=e[o]);r.on("presave",i.setBusy(r)),r.on("save",i.unsetBusy(r)),r.on("predestroy",i.setBusy(r)),r.on("destroy",i.unsetBusy(r))};l.prototype.$clear=function(){var e=this;Object.keys(e.__moldy.__metadata).forEach(function(t){if(a(e[t],"__isMoldy","boolean")&&e[t].__isMoldy===!0)e[t].$clear();else if(e.__attributes[t].arrayOfAType)for(;e[t].length>0;)e[t].shift();else e[t]=e.__data[t]=void 0})},l.prototype.$clone=function(e){var t=this.$json();i.extend(t,e||{});var r=this.__moldy.create(t);return r},l.prototype.$data=function(e){var t=this,r=s.object(e)?e:{};return t.__destroyed?i.destroyedError(t):(Object.keys(r).forEach(function(e){t.__attributes.hasOwnProperty(e)&&(s.an.array(r[e])&&a(t.__attributes[e],"arrayOfAType","boolean")&&t.__attributes[e].arrayOfAType===!0?r[e].forEach(function(r){t[e].push(r)}):s.a.object(r[e])&&t[e]instanceof l?t[e].$data(r[e]):t[e]=r[e])}),t)},l.prototype.$destroy=function(e){var t=this,r=t.$isDirty(),n=t.$json(),o=t.__moldy.$url()+(t.__moldy.__keyless?"":"/"+t[t.__moldy.__key]),a="delete",u=s.a.func(e)?e:i.noop;return t.__destroyed?u.apply(t,[i.destroyedError(t)]):(t.emit("predestroy",{moldy:t,data:n,method:a,url:o,callback:u}),console.log("I am in destroy"),void(r?u&&u(new Error("This moldy cannot be destroyed because it has not been saved to the server yet.")):(console.log("isDirty"),this.__moldy.__defaultMiddleware.__default.destroy.call(this.__moldy,this.$json(),function(e,r){!e||e instanceof Error||(e=new Error("An unknown error occurred")),t.emit("destroy",e,r),t.__destroyed=!0,t[t.__moldy.__key]=void 0,u&&u(e,r)}))))},l.prototype.$isDirty=function(){return this.__destroyed?!0:s.empty(this[this.__moldy.__key])},l.prototype.$isValid=function(){if(this.__destroyed)return!1;var e=this,t=!0;return Object.keys(e.__attributes).forEach(function(r){if(!e.$isDirty()||r!==e.__moldy.__key){var n=e[r],o=e.__attributes[r],i=o.type,u=a(o,"arrayOfAType","boolean")?o.arrayOfAType===!0:!1,c=o.optional!==!0,y=e.__moldy.__keyless?!1:u?0===n.length:s.nullOrUndefined(n),p=s.not.empty(i)&&s.a.string(i)?s.not.a[i](n):y;u&&s.not.empty(n)&&n[0]instanceof l&&n.forEach(function(e){t&&e.$isValid()===!1&&(t=!1)}),t&&c&&p&&(t=!1)}}),t},l.prototype.$json=function(){var e=this,t=e.__data,r={};return Object.keys(t).forEach(function(e){s.an.array(t[e])&&t[e][0]instanceof l?(r[e]=[],t[e].forEach(function(t){r[e].push(t.$json())})):r[e]=t[e]instanceof l?t[e].$json():t[e]}),r},l.prototype.$save=function(e){var t=this,r=null,n=t.$isDirty(),o=t.$json(),u=t.__moldy.$url()+(n||t.__moldy.__keyless?"":"/"+t[t.__moldy.__key]),c=n?"save":"create",l=s.a.func(e)?e:i.noop;t.__destroyed=!1,t.emit("presave",{moldy:t,data:o,method:c,url:u,callback:l});var y=a(o,t.__key)&&s.not.empty(o[t.__key]);console.log("!!!"),console.log(this.__moldy.__defaultMiddleware),this.__moldy.__defaultMiddleware.__default[c].call(this.__moldy,o,function(e,o){!e||e instanceof Error||(e=new Error("An unknown error occurred")),!e&&n&&s.object(o)&&y&&!a(o,t.__moldy.__key)&&(e=new Error("The response from the server did not contain a valid `"+t.__moldy.__key+"`")),!e&&n&&s.object(o)&&(t.__moldy[t.__moldy.__key]=o[t.__moldy.__key]),r||t.$data(o),t.emit("save",e,o),l&&l(e,o)})},o(l.prototype),c(l),l.extend=u,r=t.exports=l},{"./helpers":20,"./request":23,"emitter-component":1,"sc-cast":2,"sc-haskey":5,"sc-is":7,useify:17}],22:[function(e,t){var r=e("./helpers/index"),n=e("emitter-component"),o=e("sg-observable-array"),a=e("sc-haskey"),i=e("sc-is"),s=e("sc-merge"),u=e("sc-cast"),c=e("useify");t.exports=function(e,t,l){var y=function(e,n){{var o=this,a=i.an.object(n)?n:{};a.initial||{}}Object.defineProperties(o,{__moldy:{value:!0},__properties:{value:a.properties||{}},__metadata:{value:{}},__baseUrl:{value:u(a.baseUrl,"string",""),writable:!0},__data:{value:{},writable:!0},__destroyed:{value:!1,writable:!0},__headers:{value:s({},u(a.headers,"object",{}),u(t.headers,"object",{})),writable:!0},__key:{value:u(a.key,"string","id")||"id",writable:!0},__keyless:{value:a.keyless===!0},__name:{value:e||a.name||""},__url:{value:u(a.url,"string",""),writable:!0},busy:{value:!1,writable:!0}}),o.__keyless||this.$property(this.__key),Object.keys(u(o.__properties,"object",{})).forEach(function(e){o.$property(e,o.__properties[e])}),o.on("prefindOne",r.setBusy(o)),o.on("findOne",r.unsetBusy(o))};return y.prototype.schema=function(e){return Object.keys(u(e,"object",{})).forEach(function(t){self.$property(t,e[t])}),this},y.prototype.proto=function(e){return this.__properties.proto=this.__properties.proto||{},r.extend(this.__properties.proto,e),this},y.prototype.create=function(t){var r=e.extend(this.__properties.proto||{});return new r(t,this)},y.prototype.$headers=function(e){var t=this;return t.__destroyed?r.destroyedError(t):(t.__headers=i.an.object(e)?e:t.__headers,i.not.an.object(e)?t.__headers:t)},y.prototype.findOne=function(e,t){var n,o=this,a=o.$url(),s="findOne",u=i.an.object(e)?e:{},c=i.a.func(e)?e:i.a.func(t)?t:r.noop;wasDestroyed=o.__destroyed,o.emit("prefindOne",{moldy:o,method:s,query:u,url:a,callback:c}),o.__destroyed=!1,console.log(),this.__defaultMiddleware.__default.findOne.call(this,e,function(e,t){!e||e instanceof Error||(e=new Error("An unknown error occurred")),e||(n=o.create(i.array(t)?t[0]:t)),o.emit("findOne",e,t),c&&c(e,n)})},y.prototype.$url=function(e){var t=this,r=i.empty(t.$baseUrl())?"":t.$baseUrl(),n=i.empty(t.__name)?"":"/"+t.__name.trim().replace(/^\//,""),o=e||t.__url||"",a=r+n+(i.empty(o)?"":"/"+o.trim().replace(/^\//,""));return t.__url=o.trim().replace(/^\//,""),i.not.a.string(e)?a:t},y.prototype.__defaultMiddleware=l,y.prototype.$baseUrl=function(e){var r=this,n=u(e,"string",r.__baseUrl||"");return r.__baseUrl=n.trim().replace(/(\/|\s)+$/g,"")||t.baseUrl||"",i.not.a.string(e)?r.__baseUrl:r},y.prototype.find=function(t,n){var o=this,a=o.$url(),s="find",c=[],l=i.an.object(t)?t:{},y=i.a.func(t)?t:i.a.func(n)?n:r.noop;o.emit("prefind",{moldy:o,method:s,query:l,url:a,callback:y}),this.__defaultMiddleware.__default.find.call(this,t,function(t,r){!t||t instanceof t||(t=new Error("An unknown error occurred")),i.array(r)?r.forEach(function(e){c.push(o.create(e))}):c.push(o.create(_data));var r=u(c instanceof e||i.an.array(c)?c:null,"array",[]);o.emit("find",t,r),y&&y(t,r)})},y.prototype.$defineProperty=function(e,t,n){var a=e[t]||n,s=this.__metadata[t];if(!e.hasOwnProperty(t)||!e.__attributes.hasOwnProperty(t)){if((s.valueIsAnArrayMoldy||s.valueIsAnArrayString)&&(s.attributes.type=s.value,s.attributeArrayTypeIsAMoldy=s.valueIsAnArrayMoldy,s.attributeArrayTypeIsAString=s.valueIsAnArrayString,s.attributeTypeIsAnArray=!0),s.attributeTypeIsAnInstantiatedMoldy)Object.defineProperty(e,t,{value:s.attributes["default"],enumerable:!0}),e.__data[t]=e[t];else if(s.valueIsAStaticMoldy)Object.defineProperty(e,t,{value:new y(s.value.name,s.value).create(),enumerable:!0}),e.__data[t]=e[t];else if(s.attributeTypeIsAnArray){var c=o([]),l=s.attributeArrayTypeIsAString||s.attributeArrayTypeIsAMoldy?s.attributes.type[0]:"*";s.attributes.arrayOfAType=!0,Object.defineProperty(e,t,{value:c,enumerable:!0}),e.__data[t]=e[t],["push","unshift"].forEach(function(e){c.on(e,function(){var t=Array.prototype.slice.call(arguments),r=[];return t.forEach(function(e){if(s.attributeArrayTypeIsAMoldy){var t=new y(l.name,l),n=i.an.object(e)?e:s.attributes["default"];r.push(t.create(n))}else r.push(u(e,l,s.attributes["default"]))}),c["__"+e].apply(c,r)})}),a&&a.length>0&&a.forEach(function(r){e[t].push(r)})}else Object.defineProperty(e,t,{get:r.getProperty(t),set:r.setProperty(t),enumerable:!0});e.__attributes[t]=s.attributes}void 0!==a?e[t]=a:i.empty(e[t])&&s.attributes.optional===!1&&i.not.nullOrUndefined(s.attributes["default"])?e[t]=s.attributes["default"]:i.empty(e[t])&&s.attributes.optional===!1&&(e.__data[t]=s.attributeTypeIsAnArray||s.attributeTypeIsAnInstantiatedMoldy?e[t]:i.empty(s.attributes.type)?void 0:u(void 0,s.attributes.type))},y.prototype.$property=function(e,t){var n=this,o=new r.attributes(e,t),s=i.a.string(o.type)&&/moldy/.test(o.type),u=i.an.array(o.type),c=i.an.array(t)&&a(t[0],"properties","object"),l=i.an.array(t)&&i.a.string(t[0]),y=u&&a(o.type[0],"properties","object"),p=u&&i.a.string(o.type[0])&&i.not.empty(o.type[0]),f=a(t,"properties","object");return n.__metadata[e]={attributes:o,value:t,attributeTypeIsAnInstantiatedMoldy:s,attributeTypeIsAnArray:u,valueIsAnArrayMoldy:c,valueIsAnArrayString:l,attributeArrayTypeIsAMoldy:y,attributeArrayTypeIsAString:p,valueIsAStaticMoldy:f},n},n(y.prototype),c(y),y}},{"./helpers/index":20,"emitter-component":1,"sc-cast":2,"sc-haskey":5,"sc-is":7,"sc-merge":13,"sg-observable-array":15,useify:17}],23:[function(e,t){var r=e("sc-is"),n=(e("sc-cast"),e("sc-haskey"));t.exports=function(e,t,o,a,i,s){var u=e,c=[],l="find"===a||"findOne"===a?"get":a,y=n(o,u.__key)&&r.not.empty(o[u.__key])&&/get/.test(l),p=t?!0:!1,f=p?t.$isDirty():!1;u.__defaultMiddleware(function(e){var o=Array.prototype.slice.call(arguments),i=e===u?null:o.shift(),l=o.shift();!i||i instanceof Error||(i=new Error("An unknown error occurred")),!i&&p&&f&&r.object(l)&&y&&!n(l,u.__key)&&(i=new Error("The response from the server did not contain a valid `"+u.__key+"`")),!i&&f&&p&&r.object(l)&&(u[u.__key]=l[u.__key]),i||(p?(t.$data(l),c=t):"findOne"!==a&&r.array(l)?l.forEach(function(e){c.push(u.create(e))}):c=u.create("findOne"===a&&r.array(l)?l[0]:l)),s&&s(i,c)},e,o,l,i)}},{"sc-cast":2,"sc-haskey":5,"sc-is":7}]},{},[19])(19)});