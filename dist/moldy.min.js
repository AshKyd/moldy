!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.moldy=t()}}(function(){return function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};e[a][0].call(u.exports,function(t){var r=e[a][1][t];return o(r?r:t)},u,u.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],2:[function(t,e){var r=t("sc-contains"),n=t("sc-is"),o=function(t,e,i,a){var s,c=e,u=n.an.array(a)?a:[];switch(!0){case/float|integer/.test(c):c="number"}if(n.a[c](t)||"*"===c)s=t;else switch(!0){case"array"===c:try{if(n.a.string(t)&&(s=JSON.parse(t)),n.not.an.array(s))throw""}catch(l){n.not.nullOrUndefined(t)&&(s=[t])}break;case"boolean"===c:try{s=/^(true|1|y|yes)$/i.test(t.toString())?!0:void 0}catch(l){}if(n.not.a.boolean(s))try{s=/^(false|-1|0|n|no)$/i.test(t.toString())?!1:void 0}catch(l){}s=n.a.boolean(s)?s:void 0;break;case"date"===c:try{s=new Date(t),s=isNaN(s.getTime())?void 0:s}catch(l){}break;case"string"===c:try{if(s=JSON.stringify(t),n.undefined(s))throw""}catch(l){try{s=t.toString()}catch(l){}}break;case"number"===c:try{s=parseFloat(t),(n.not.a.number(s)||isNaN(s))&&(s=void 0)}catch(l){s=void 0}if(void 0!==s)switch(!0){case"integer"===e:s=parseInt(s)}break;default:try{s=o(JSON.parse(t),c)}catch(l){}}return u.length>0&&!r(u,s)&&(s=u[0]),n.not.undefined(s)?s:n.not.undefined(i)?i:null};e.exports=o},{"sc-contains":3,"sc-is":7}],3:[function(t,e){var r=function(t,e){var r=!1;return Array.isArray(t)?t.forEach(function(t){r===!1&&e===t&&(r=!0)}):Object(t)===t&&Object.keys(t).forEach(function(n){r===!1&&t[n]===e&&(r=!0)}),r};e.exports=r},{}],4:[function(t,e,r){var n="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";r.generate=function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:7&r|8).toString(16)});return e},r.match=function(t){var e=new RegExp(n,"g"),r=("string"==typeof t?t:"").match(e);return Array.isArray(r)?r:[]},r.isValid=function(t){var e=new RegExp(n);return e.test(t)}},{}],5:[function(t,e){function r(t,e,i){t="object"===n(t)?t:{},e="array"===n(e)?e:[],i="string"===n(i)?i:"";var a=e.length>0?e.shift():"",s=o.call(t,a)||void 0!==t[a],c=s?t[a]:void 0,u=n(c)===i;return e.length>0&&s?r(t[a],e,i):e.length>0||""===i?s:s&&u}var n=t("type-component"),o=Object.prototype.hasOwnProperty;e.exports=function(t,e,o){return e="string"===n(e)?e.split("."):[],r(t,e,o)}},{"type-component":6}],6:[function(t,e){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],7:[function(t,e,r){var n=t("./ises/type"),o={a:{},an:{},not:{a:{},an:{}}},i={arguments:["arguments",n("arguments")],array:["array",n("array")],"boolean":["boolean",n("boolean")],date:["date",n("date")],"function":["function","func","fn",n("function")],"null":["null",n("null")],number:["number","integer","int",n("number")],object:["object",n("object")],regexp:["regexp",n("regexp")],string:["string",n("string")],undefined:["undefined",n("undefined")],empty:["empty",t("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",t("./ises/nullorundefined")],guid:["guid",t("./ises/guid")]};Object.keys(i).forEach(function(t){var e=i[t].slice(0,i[t].length-1),r=i[t][i[t].length-1];e.forEach(function(t){o[t]=o.a[t]=o.an[t]=r,o.not[t]=o.not.a[t]=o.not.an[t]=function(){return r.apply(this,arguments)?!1:!0}})}),r=e.exports=o,r.type=n},{"./ises/empty":8,"./ises/guid":9,"./ises/nullorundefined":10,"./ises/type":11}],8:[function(t,e){var r=t("../type");e.exports=function(t){var e=!1;return"null"===r(t)||"undefined"===r(t)?e=!0:"object"===r(t)?e=0===Object.keys(t).length:"boolean"===r(t)?e=t===!1:"number"===r(t)?e=0===t||-1===t:("array"===r(t)||"string"===r(t))&&(e=0===t.length),e}},{"../type":12}],9:[function(t,e){var r=t("sc-guid");e.exports=function(t){return r.isValid(t)}},{"sc-guid":4}],10:[function(t,e){e.exports=function(t){return null===t||void 0===t||void 0===t}},{}],11:[function(t,e){var r=t("../type");e.exports=function(t){return function(e){return r(e)===t}}},{"../type":12}],12:[function(t,e){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],13:[function(t,e){var r=t("type-component"),n=function(){var t=Array.prototype.slice.call(arguments),e="boolean"===r(t[0])?t.shift():!1,o=t,i={};return o.forEach(function(t){"object"===r(t)&&Object.keys(t).forEach(function(o){Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=e&&"object"===r(t[o])?n(e,{},i[o],t[o]):t[o])})}),i};e.exports=n},{"type-component":14}],14:[function(t,e){e.exports=t(6)},{}],15:[function(t,e){e.exports={defaults:{middlewareKey:"all"}}},{}],16:[function(t,e){var r=t("sc-is"),n=t("./config.json"),o=function(){},i=function(t,e,n){return r.not.empty(e)&&r.a.string(e)?(r.not.an.array(t[e])&&(t[e]=[]),r.a.func(n)&&t[e].push(n),t[e]):void 0},a=function(){this.functions={all:[]}};a.prototype.use=function(){var t=this,e=Array.prototype.slice.call(arguments),a=r.a.string(e[0])?e.shift():n.defaults.middlewareKey,s=r.a.func(e[0])?e.shift():o;i(t.functions,a,s)},a.prototype.middleware=function(){var t=this,e=0,a=Array.prototype.slice.call(arguments),s=r.a.string(a[0])&&r.a.func(a[1])?a.shift():n.defaults.middlewareKey,c=r.a.func(a[0])?a.shift():o;i(t.functions,s);var u=function(){var r=t.functions[s][e++],n=Array.prototype.slice.call(arguments);r?(n.push(u),r.apply(t.context,n)):c.apply(t.context,n)};u.apply(t.context,a)},a.prototype.clear=function(t){r.a.string(t)&&r.not.empty(t)?this.functions[t]=[]:this.functions={all:[]}},e.exports=function(t){var e=new a;r.an.object(t)?(Object.defineProperties(t,{use:{value:function(){return e.use.apply(e,arguments),t}},middleware:{value:function(){e.middleware.apply(e,arguments)}},useify:{value:e}}),e.context=t):r.a.fn(t)&&(t.prototype.middleware=function(){e.context=this,e.middleware.apply(e,arguments)},t.use=function(){return e.use.apply(e,arguments),this},t.useify=e)}},{"./config.json":15,"sc-is":7}],17:[function(t,e){var r=function(t){var e={},r=Array.isArray(t)?t:[],n=function(t){var n=Array.prototype.slice.call(arguments,1);return e[t]?e[t].apply(r,n):r["__"+t].apply(r,n)};return Object.defineProperties(r,{on:{value:function(t,r){e[t]=r}}}),Object.defineProperty(r,"pop",{value:function(){return n("pop",r[r.length-1])}}),Object.defineProperty(r,"__pop",{value:function(){return Array.prototype.pop.apply(r,arguments)}}),Object.defineProperty(r,"shift",{value:function(){return n("shift",r[0])}}),Object.defineProperty(r,"__shift",{value:function(){return Array.prototype.shift.apply(r,arguments)}}),["push","reverse","unshift","sort","splice"].forEach(function(t){var e={};e[t]={value:n.bind(null,t)},e["__"+t]={value:function(){return Array.prototype[t].apply(r,arguments)}},Object.defineProperties(r,e)}),r};e.exports=r},{}],18:[function(t,e){function r(){}function n(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(){if(b.XMLHttpRequest&&("file:"!=b.location.protocol||!b.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function i(t){return t===Object(t)}function a(t){if(!i(t))return t;var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function s(t){for(var e,r,n={},o=t.split("&"),i=0,a=o.length;a>i;++i)r=o[i],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n}function c(t){var e,r,n,o,i=t.split(/\r?\n/),a={};i.pop();for(var s=0,c=i.length;c>s;++s)r=i[s],e=r.indexOf(":"),n=r.slice(0,e).toLowerCase(),o=m(r.slice(e+1)),a[n]=o;return a}function u(t){return t.split(/ *; */).shift()}function l(t){return d(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(t[n]=o),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function f(t,e){var r=this;y.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e=new p(r);"HEAD"==t&&(e.text=null),r.callback(null,e)})}function h(t,e){return"function"==typeof e?new f("GET",t).end(e):1==arguments.length?new f("GET",t):new f(t,e)}var y=t("emitter"),d=t("reduce"),b="undefined"==typeof window?this:window,m="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};h.serializeObject=a,h.parseString=s,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":a,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=u(t);var e=l(t);for(var r in e)this[r]=e[r]},p.prototype.parseBody=function(t){var e=h.parse[this.type];return e?e(t):null},p.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,r=t.path,n="cannot "+e+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=e,o.path=r,o},h.Response=p,y(f.prototype),f.prototype.use=function(t){return t(this),this},f.prototype.timeout=function(t){return this._timeout=t,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(t,e){if(i(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},f.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},f.prototype.type=function(t){return this.set("Content-Type",h.types[t]||t),this},f.prototype.accept=function(t){return this.set("Accept",h.types[t]||t),this},f.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},f.prototype.query=function(t){return"string"!=typeof t&&(t=a(t)),t&&this._query.push(t),this},f.prototype.send=function(t){var e=i(t),r=this.getHeader("Content-Type");if(e&&i(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(r||this.type("json"),this):this},f.prototype.callback=function(t,e){var r=this._callback;return 2==r.length?r(t,e):t?this.emit("error",t):void r(e)},f.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},f.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(t){var e=this,i=this.xhr=o(),a=this._query.join("&"),s=this._timeout,c=this._data;if(this._callback=t||r,i.onreadystatechange=function(){return 4==i.readyState?0==i.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},i.upload&&(i.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),s&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},s)),a&&(a=h.serializeObject(a),this.url+=~this.url.indexOf("?")?"&"+a:"?"+a),i.open(this.method,this.url,!0),this._withCredentials&&(i.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof c&&!n(c)){var u=h.serialize[this.getHeader("Content-Type")];u&&(c=u(c))}for(var l in this.header)null!=this.header[l]&&i.setRequestHeader(l,this.header[l]);return this.emit("request",this),i.send(c),this},h.Request=f,h.get=function(t,e,r){var n=h("GET",t);return"function"==typeof e&&(r=e,e=null),e&&n.query(e),r&&n.end(r),n},h.head=function(t,e,r){var n=h("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},h.del=function(t,e){var r=h("DELETE",t);return e&&r.end(e),r},h.patch=function(t,e,r){var n=h("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},h.post=function(t,e,r){var n=h("POST",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},h.put=function(t,e,r){var n=h("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&n.send(e),r&&n.end(r),n},e.exports=h},{emitter:19,reduce:20}],19:[function(t,e){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},e._off=r,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;var n=r.indexOf(e._off||e);return~n&&r.splice(n,1),this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],20:[function(t,e){e.exports=function(t,e,r){for(var n=0,o=t.length,i=3==arguments.length?r:t[n++];o>n;)i=e.call(null,i,t[n],++n,t);return i}},{}],21:[function(t,e,r){var n=t("sc-is"),o=t("sc-cast"),i=t("sc-haskey"),a=t("./helpers"),s=t("sc-merge"),c=t("emitter-component"),u=t("sc-useify"),l=t("./request"),p=t("sg-observable-array"),f=function(t,e){var r=this,i=n.an.object(e)?e:{};Object.defineProperties(r,{__model:{value:!0},__attributes:{value:{},writable:!0},__baseUrl:{value:o(i.baseUrl,"string",""),writable:!0},__data:{value:{},writable:!0},__destroyed:{value:!1,writable:!0},__headers:{value:o(i.headers,"object",{}),writable:!0},__key:{value:o(i.key,"string","id")||"id",writable:!0},__keyless:{value:i.keyless===!0},__name:{value:t||i.name||""},__url:{value:o(i.url,"string",""),writable:!0},busy:{value:!1,writable:!0}}),i.keyless||r.$property(r.__key),Object.keys(o(i.properties,"object",{})).forEach(function(t){r.$property(t,i.properties[t])}),r.on("presave",a.setBusy(r)),r.on("save",a.unsetBusy(r)),r.on("predestroy",a.setBusy(r)),r.on("destroy",a.unsetBusy(r)),r.on("preget",a.setBusy(r)),r.on("get",a.unsetBusy(r))};f.prototype.$baseUrl=function(t){var e=this,r=o(t,"string",e.__baseUrl||"");return e.__baseUrl=r.trim().replace(/(\/|\s)+$/g,""),n.not.a.string(t)?e.__baseUrl:e},f.prototype.$collection=function(t){var e=this,r=e.$url(),o="get",i=n.an.object(t)?t:{},s=n.a.func(t)?t:n.a.func(_callback)?_callback:a.noop;e.emit("precollection",{model:e,method:o,query:i,url:r,callback:s}),l(e,i,o,r,function(t,r){e.emit("collection",t,r),s.apply(e,arguments)})},f.prototype.$destroy=function(t){var e=this,r=e.$isDirty(),o=e.$json(),i=e.$url()+(e.__keyless?"":"/"+e[e.__key]),s="delete",c=n.a.func(t)?t:a.noop;e.emit("predestroy",{model:e,data:o,method:s,url:i,callback:c}),r?c.apply(e,[new Error("This model cannot be destroyed because it has not been saved to the server yet.")]):l(e,o,s,i,function(){e.emit("destroy",e),e.__destroyed=!0,c.apply(e,arguments)})},f.prototype.$data=function(t){var e=this,r=n.object(t)?t:{};return Object.keys(r).forEach(function(t){e.__attributes.hasOwnProperty(t)&&(n.an.array(r[t])&&i(e.__attributes[t],"arrayOfAType","boolean")&&e.__attributes[t].arrayOfAType===!0?r[t].forEach(function(r){e[t].push(r)}):n.a.object(r[t])&&e[t]instanceof f?e[t].$data(r[t]):e[t]=r[t])}),e},f.prototype.$clone=function(t){var e=this,r=o(t,"object",{}),n=new f(e.__name,{baseUrl:e.__baseUrl,headers:e.__headers,key:e.__key,keyless:e.__keyless,url:e.__url});return Object.keys(e.__attributes).forEach(function(t){n.$property(t,s(e.__attributes[t])),n[t]=r[t]}),n},f.prototype.$get=function(t,e){var r=this,o=r.$url(),i="get",s=n.an.object(t)?t:{},c=n.a.func(t)?t:n.a.func(e)?e:a.noop;r.emit("preget",{model:r,method:i,query:s,url:o,callback:c}),l(r,s,i,o,function(t,e){r.emit("get",t,e),c.apply(r,arguments)})},f.prototype.$headers=function(t){return this.__headers=n.an.object(t)?t:this.__headers,n.not.an.object(t)?this.__headers:this},f.prototype.$isDirty=function(){return n.empty(this[this.__key])},f.prototype.$isValid=function(){var t=this,e=!0;return Object.keys(t.__attributes).forEach(function(r){if(!t.$isDirty()||r!==t.__key){var o=t[r],a=t.__attributes[r],s=a.type,c=i(a,"arrayOfAType","boolean")?a.arrayOfAType===!0:!1,u=a.optional!==!0,l=t.__keyless?!1:c?0===o.length:n.nullOrUndefined(o),p=n.not.empty(s)&&n.a.string(s)?n.not.a[s](o):l;c&&n.not.empty(o)&&o[0]instanceof f&&o.forEach(function(t){e&&t.$isValid()===!1&&(e=!1)}),e&&u&&p&&(e=!1)}}),e},f.prototype.$json=function(){var t=this,e=t.__data,r={};return Object.keys(e).forEach(function(t){n.an.array(e[t])&&e[t][0]instanceof f?(r[t]=[],e[t].forEach(function(e){r[t].push(e.$json())})):n.not.an.object(e[t])?r[t]=e[t]:e[t]instanceof f&&(r[t]=e[t].$json())}),r},f.prototype.$property=function(t,e){var r=this,s=new a.attributes(t,e),c=r[t],u=n.a.string(s.type)&&/model/.test(s.type),l=n.an.array(s.type),h=n.an.array(e)&&i(e[0],"properties","object"),y=n.an.array(e)&&n.a.string(e[0]),d=l&&i(s.type[0],"properties","object"),b=l&&n.a.string(s.type[0])&&n.not.empty(s.type[0]),m=i(e,"properties","object");if(!r.hasOwnProperty(t)||!r.__attributes.hasOwnProperty(t)){if((h||y)&&(s.type=e,d=h,b=y,l=!0),u)Object.defineProperty(r,t,{value:s["default"],enumerable:!0}),r.__data[t]=r[t];else if(m)Object.defineProperty(r,t,{value:new f(e.name,e),enumerable:!0}),r.__data[t]=r[t];else if(l){var _=p([]),v=b||d?s.type[0]:"*";s.arrayOfAType=!0,Object.defineProperty(r,t,{value:_,enumerable:!0}),r.__data[t]=r[t],["push","unshift"].forEach(function(t){_.on(t,function(){var e=Array.prototype.slice.call(arguments),r=[];return e.forEach(function(t){if(d){var e=new f(v.name,v),i=n.an.object(t)?t:s["default"];e.$data(i),r.push(e)}else r.push(o(t,v,s["default"]))}),_["__"+t].apply(_,r)})})}else Object.defineProperty(r,t,{get:a.getProperty(t),set:a.setProperty(t),enumerable:!0});r.__attributes[t]=s}return void 0!==c?r[t]=c:n.empty(r[t])&&s.optional===!1&&n.not.nullOrUndefined(s["default"])?r[t]=s["default"]:n.empty(r[t])&&s.optional===!1&&(r.__data[t]=l||u?r[t]:n.empty(s.type)?void 0:o(void 0,s.type)),r},f.prototype.$save=function(t){var e=this,r=e.$isDirty(),o=e.$json(),i=e.$url()+(r||e.__keyless?"":"/"+e[e.__key]),s=r?"post":"put",c=n.a.func(t)?t:a.noop;e.emit("presave",{model:e,data:o,method:s,url:i,callback:c}),l(e,o,s,i,function(t,r){e.emit("save",t,r),c.apply(e,arguments)})},f.prototype.$url=function(t){var e=this,r=n.empty(e.__baseUrl)?"":e.__baseUrl,o=n.empty(e.__name)?"":"/"+e.__name.trim().replace(/^\//,""),i=t||e.__url||"",a=r+o+(n.empty(i)?"":"/"+i.trim().replace(/^\//,""));return e.__url=i.trim().replace(/^\//,""),n.not.a.string(t)?a:e},c(f.prototype),u(f),r=e.exports=f,r.schema=t("./middleware/schema.middleware"),r.ajax=t("./middleware/ajax.middleware")},{"./helpers":22,"./middleware/ajax.middleware":23,"./middleware/schema.middleware":24,"./request":25,"emitter-component":1,"sc-cast":2,"sc-haskey":5,"sc-is":7,"sc-merge":13,"sc-useify":16,"sg-observable-array":17}],22:[function(t,e,r){var n=t("sc-is"),o=t("sc-cast"),i=t("sc-merge");r.attributes=function(t,e){var r;return r=n.a.string(e)?{type:e}:n.an.object(e)&&e.__model===!0?{type:"model","default":e}:e,i({name:t||"",type:"","default":null,optional:!1},r)},r.getProperty=function(t){return function(){return this.__data[t]}},r.setBusy=function(t){return function(){t.busy=!0}},r.setProperty=function(t){return function(e){var r=this,n=r.__attributes[t],i=n.type?o(e,n.type,n["default"]):e;r.__data[t]!==i&&r.emit("change",r.__data[t],i),r.__data[t]=i}},r.unsetBusy=function(t){return function(){t.busy=!1}},r.noop=function(){}},{"sc-cast":2,"sc-is":7,"sc-merge":13}],23:[function(t,e){var r=t("superagent"),n=t("sc-cast"),o=t("sc-is"),i=t("sc-haskey");e.exports=function(t,e,a,s,c){var u,l=/delete/i.test(a)?"del":a,p=t,f=n(e,"object",{}),h=s;/get/i.test(l)&&i(f,p.__key)&&new RegExp(f[p.__key]).test(h)===!1&&(h+="/"+f[p.__key],delete f[p.__key]),r[l](h)[/get/i.test(l)?"query":"send"](f).set(p.$headers()).type("json").accept("json").end(function(t,e){var r=o.an.object(e)?e:{},n=i(e,"body")&&(o.object(e.body)||o.array(e.body))?e.body:null;r.ok!==!0&&(u=new Error("The response from the server was not OK")),null===n&&(u=new Error("The response from the server contained an empty body")),c&&c(u,n)})}},{"sc-cast":2,"sc-haskey":5,"sc-is":7,superagent:18}],24:[function(t,e){var r=t("superagent"),n=t("sc-is"),o=t("sc-haskey");e.exports=function(t,e,i,a,s){t.__schema?s(t,e,i,a):r.get(t.$url()+"/schema").end(function(r,c){var u=r,l=n.an.object(c)?c:{},p=o(c,"body")&&n.object(c.body)?c.body:{};if(u||l.ok===!0||(u=new Error("The response from the server was not OK")),u)throw u;Object.defineProperty(t,"__schema",{value:p}),Object.keys(p).forEach(function(e){n.a.func(t["$"+e])&&t["$"+e](p[e]),"properties"===e&&n.object(p[e])&&Object.keys(p.properties).forEach(function(e){var r=t[e];t.$property(e,p.properties[e]),n.not.empty(r)&&(t[e]=r)})}),s(t,e,i,a)})}},{"sc-haskey":5,"sc-is":7,superagent:18}],25:[function(t,e){var r=t("sc-is"),n=(t("sc-cast"),t("sc-haskey"));e.exports=function(t,e,o,i,a){var s=t,c=[],u=n(e,s.__key)&&r.not.empty(e[s.__key])&&/get/.test(o),l=s.$isDirty();s.middleware(function(t){var e=Array.prototype.slice.call(arguments),o=t===s?null:e.shift(),i=e.shift();!o||o instanceof Error||(o=new Error("An unknown error occurred")),!o&&l&&r.object(i)&&u&&!n(i,s.__key)&&(o=new Error("The response from the server did not contain a valid `"+s.__key+"`")),!o&&l&&r.object(i)&&(s[s.__key]=i[s.__key]),o||(r.array(i)?(i.forEach(function(t){c.push(s.$clone(t))}),s=c):s.$data(i)),a&&a(o,s)},t,e,o,i)}},{"sc-cast":2,"sc-haskey":5,"sc-is":7}]},{},[21])(21)});